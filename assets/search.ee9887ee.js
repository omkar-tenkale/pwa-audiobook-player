import{Q as e,R as r,W as t,X as n,d as a,u as s,Y as c,c as i,Z as l,i as h,h as o,q as u,b as w,A as b,t as d,$ as f,a0 as p,a as g,z as m,f as v,a1 as y,F as S,N as k,r as q,e as x,M as I,a2 as $,y as C,O as R}from"./index.e2dc2028.js";const T=(e,r="")=>r.toLowerCase().includes(e),j=(e,r)=>T(e,r.name),z=[{...e,filter:(e,r)=>{const t=T(e,r.name),n=T(e,r.artists.join(" ")),a=T(e,r.album);return t||n||a}},{...r,filter:j},{...t,filter:j},{...n,filter:j}],N=d('<div><input aria-label="Search box" placeholder="Search..." autocapitalize="none"></div>',3),O=d("<div></div>",2),U=e=>{const r=s();let t;const n=e=>{r(`/search/${encodeURIComponent(e)}`,{replace:!0})},a=f((()=>{const e=t.value.trim();n(e)}),200),d=()=>{n("")};return c((()=>{if(!t)return;const r=e.searchTerm;p(t)&&""!==r||(t.value=r)})),i(b,{hideSpacer:!0,get children(){return[(()=>{const r=N.cloneNode(!0),n=r.firstChild;return"function"==typeof t?t(n):t=n,l(n,"input",a,!0),h(r,(()=>{const r=o((()=>!!e.searchTerm),!0);return()=>r()&&i(u,{icon:"close",onClick:d})})(),null),w((e=>{const t="i ad",a="wa F Q -a bd";return t!==e.t&&(r.className=e.t=t),a!==e.i&&(n.className=e.i=a),e}),{t:void 0,i:void 0}),r})(),(()=>{const e=O.cloneNode(!0);return w((()=>e.className="cd")),e})()]}})};a(["input"]);const W=d("<div></div>",2),_=d("<button></button>",2),A=d("<h1></h1>",2),B="/search/:searchTerm",E=()=>{const[e]=g(),r=m((()=>"/search/:searchTerm/*")),t=o((()=>{var e;return decodeURIComponent((null==(e=r())?void 0:e.params.searchTerm)||"")})),n=z.map((r=>{const[n,a]=v(!0),s=o(((a=[])=>{const s=Object.values((r=>{switch(r){case R.TRACK:return e.tracks;case R.ARTIST:return e.artists;case R.ALBUM:return e.albums;case R.PLAYLIST:return e.playlists;default:throw new Error("Wrong type")}})(r.type)),c=n(),i=t().trim().toLowerCase();return y((()=>""===i?s.map((e=>e.id)):c?(e=>e.sort(((e,r)=>{const t=e.name.toLowerCase().trim(),n=r.name.toLowerCase().trim();return t<n?-1:t>n?1:0})))(s.filter((e=>r.filter(i,e)))).map((e=>e.id)):a))}));return{...r,itemIds:s,isSelected:n,setIsSelected:a}})),a=o((()=>n.some((e=>0!==e.itemIds().length))));return i(C,{get topBar(){return i(U,{get searchTerm(){return t()}})},title:"Search",scrollable:!0,get children(){return[(()=>{const e=W.cloneNode(!0);return h(e,i(S,{each:n,children:e=>(()=>{const r=_.cloneNode(!0);return r.$$click=()=>e.setIsSelected((e=>!e)),h(r,i(k,{icon:"checkmark",get class(){return"hd"}}),null),h(r,(()=>e.title),null),w((()=>r.className=q("na -B -J -F F Q -a -u -p -S da y fd",e.isSelected()&&"gd"))),r})()})),w((()=>e.className="ka -q -u ed")),e})(),i(x,{get when(){return a()},get fallback(){return i(I,{message:"Nothing found"})},get children(){return i(S,{each:n,children:e=>i(x,{get when(){return o((()=>!!e.itemIds().length),!0)()&&e.isSelected()},get children(){return[(()=>{const r=A.cloneNode(!0);return h(r,(()=>e.title)),w((()=>r.className="D O Z -j -q id")),r})(),i($,{get component(){return e.component},get items(){return e.itemIds()}})]}})})}})]}})};a(["click"]);export{B as SEARCH_MAIN_PATH,E as default};
